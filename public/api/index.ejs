var _SiteLayoutService;

function siteLayoutService(opts) {
  _SiteLayoutService = opts || {};
  _SiteLayoutService.headerFooterContainer = _SiteLayoutService.headerFooterContainer || 'body';
  _SiteLayoutService.headerHtmlFragment = '<%-currHost%>/header.html';
  _SiteLayoutService.footerHtmlFragment = '<%-currHost%>/footer.html';

  <% include jquery.js %>
    $.noConflict();
  jQuery(document).ready(function($) {
    // download css
    <% cssFiles.forEach(function(f) { %>
      $('head').append('<link rel="stylesheet" href="<%=f%>"/>'); <%
    }); %>

    $.ajaxSetup({
      cache: true
    });
    // download js
    <% jsFiles.forEach(function(f) { %>
      $.getScript("<%=currHost%>/js/<%=f%>").done(function() { <%
      }); %>
      // download header and footer after js are loaded
      $.get(opts.headerHtmlFragment, function(data) {
        $(_SiteLayoutService.headerFooterContainer).first().prepend(data);
      });
      $.get(opts.footerHtmlFragment, function(data) {
        $(_SiteLayoutService.headerFooterContainer).first().append(data);
      }); <% jsFiles.forEach(function(f) { %>
      }); <%
    }); %>
  });
};